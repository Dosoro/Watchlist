/* ======================================================
   External Fonts
   ====================================================== */
@import url("https://fonts.googleapis.com/css2?family=Roboto+Mono:ital,wght@0,100..700;1,100..700&display=swap");

/* ======================================================
   Tailwind Core (v4)
   ====================================================== */
@import "tailwindcss";

/* ======================================================
   View Transitions for Smooth Theme Changes
   ====================================================== */
::view-transition-old(root),
::view-transition-new(root) {
  animation-duration: 0.4s;
}

::view-transition-old(root) {
  z-index: 1;
}

::view-transition-new(root) {
  z-index: 2;
}

/* ======================================================
   Theme Tokens (Semantic layer)
   Utilities consume THESE, not raw values
   ====================================================== */
@theme {
  /* Colors */
  --color-background: hsl(var(--background));
  --color-foreground: hsl(var(--foreground));
  --color-primary: hsl(var(--primary));
  --color-secondary: hsl(var(--secondary));
  --color-accent: hsl(var(--accent));

  /* Typography */
  --font-roboto: "Roboto Mono", monospace;

  /* Effects */
  --shadow-card: 0 4px 8px -2px rgba(0, 0, 0, 0.25);
}

/* ======================================================
   Base Layer
   Globals, tokens, browser behavior
   ====================================================== */
@layer base {

  /* --------------------------------------------------
     Raw Color Tokens
     -------------------------------------------------- */
  :root {
    --background: 39 44% 87%;
    --foreground: 37 17% 96%;
    --primary: 37 17% 25%;
    --secondary: 37 17% 55%;
    --accent: 21 87% 55%;
  }

  /* Dark mode */
  html.dark {
    --background: 220 15% 10%;
    --foreground: 220 15% 22%;
    --primary: 220 13% 95%;
    --secondary: 220 13% 70%;
    --accent: 21 87% 55%;
  }

  /* --------------------------------------------------
     Document layout sanity
     -------------------------------------------------- */
  html,
  body,
  #root {
    height: 100%;
  }

  html {
    @apply scroll-smooth;
    scrollbar-color: hsl(var(--primary)) hsl(var(--background));
    scrollbar-width: thin;
  }

  /* --------------------------------------------------
     Smooth theme transitions for ALL elements
     -------------------------------------------------- */
  * {
    transition: background-color 0.3s ease,
      color 0.3s ease,
      border-color 0.3s ease,
      box-shadow 0.3s ease;
  }

  /* --------------------------------------------------
     Typography defaults
     -------------------------------------------------- */
  body,
  input,
  textarea,
  button {
    font-family: var(--font-roboto);
  }

  body {
    background-color: var(--color-background);
    color: var(--color-primary);
  }

  /* --------------------------------------------------
     Scrollbars (WebKit)
     -------------------------------------------------- */
  ::-webkit-scrollbar {
    width: 12px;
  }

  ::-webkit-scrollbar-track {
    background: hsl(var(--background));
  }

  ::-webkit-scrollbar-thumb {
    background-color: hsl(var(--primary));
    border-radius: 6px;
    border: 3px solid hsl(var(--background));
  }

  ::-webkit-scrollbar-thumb:hover {
    background-color: hsl(var(--primary) / 0.8);
  }

  /* --------------------------------------------------
     Text selection
     -------------------------------------------------- */
  ::selection {
    background-color: hsl(var(--accent) / 0.5);
    color: hsl(var(--secondary));
  }
}

/* ======================================================
   Animations (keyframes only)
   ====================================================== */
@keyframes fade-in {
  from {
    opacity: 0;
    transform: translateY(10px);
  }

  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes scale-up {
  from {
    opacity: 0;
    transform: scale(0.95);
  }

  to {
    opacity: 1;
    transform: scale(1);
  }
}

@keyframes spin {
  from {
    transform: rotate(0deg);
  }

  to {
    transform: rotate(360deg);
  }
}

/* ======================================================
   Component Layer
   Reusable UI patterns
   ====================================================== */
@layer components {

  /* Logo Containers */
  .logo-lg {
    @apply rounded-2xl bg-accent p-5 shadow-card hover:-translate-y-1 hover:shadow-lg;
    transition: transform 0.2s ease, box-shadow 0.2s ease, background-color 0.3s ease;
  }

  .logo-md {
    @apply rounded-lg bg-accent p-3 shadow-card;
  }

  /* Form Container */
  .form-box {
    @apply w-full max-w-xl rounded-2xl bg-foreground p-8 shadow-card;
  }

  /* Card with Hover Effects */
  .card-hover {
    @apply rounded-xl border-2 border-secondary/20 bg-foreground p-8 hover:border-accent hover:shadow-card;
    transition: border-color 0.2s ease, box-shadow 0.2s ease, background-color 0.3s ease;
  }

  /* Input Styling with Dark Mode Support */
  .input-base {
    @apply w-full rounded-lg bg-foreground px-4 py-3 text-primary ring-2 ring-secondary focus:outline-none focus:ring-accent;
    transition: background-color 0.3s ease, color 0.3s ease, box-shadow 0.15s ease;
  }

  html.dark .input-base {
    @apply bg-foreground/80;
  }

  /* Input Wrapper & Label */
  .input-wrapper {
    @apply space-y-2;
  }

  .label-input {
    @apply text-sm font-semibold text-primary;
  }

  /* Error Message with Dark Mode Support */
  .error {
    @apply flex items-center gap-3 rounded-lg border-l-4 border-red-500 bg-red-100 p-4 text-red-700;
  }

  html.dark .error {
    @apply bg-red-900/30 border-red-600 text-red-400;
  }

  /* Button Styles */
  .button-primary {
    @apply flex items-center gap-3 rounded-lg bg-accent px-10 py-5 text-lg md:text-xl font-bold text-foreground shadow-card hover:-translate-y-1 hover:shadow-lg justify-center disabled:opacity-50 disabled:cursor-not-allowed;
    transition: transform 0.2s ease, box-shadow 0.2s ease, opacity 0.2s ease, background-color 0.3s ease, color 0.3s ease;
  }

  .button-secondary {
    @apply flex items-center justify-center gap-2 rounded-lg border-2 border-secondary/20 px-4 py-3 font-semibold text-primary hover:border-accent hover:bg-foreground/50 hover:text-accent;
    transition: border-color 0.2s ease, background-color 0.3s ease, color 0.2s ease;
  }

  .button-danger {
    @apply flex items-center gap-3 rounded-lg bg-red-500 px-8 py-4 text-lg font-bold text-white shadow-card hover:-translate-y-1 hover:shadow-lg;
    transition: transform 0.2s ease, box-shadow 0.2s ease, background-color 0.3s ease;
  }

  /* Feature Card */
  .feature-card {
    @apply flex flex-col items-center gap-4 rounded-xl border-2 border-secondary/20 bg-foreground p-8 hover:border-accent hover:shadow-card;
    transition: border-color 0.2s ease, box-shadow 0.2s ease, background-color 0.3s ease;
  }

  /* Typography Components */
  .section-title {
    @apply text-3xl font-bold text-primary;
  }

  .description-text {
    @apply text-lg text-secondary;
  }

  /* Animation Components - moved from utilities */
  .animate-fade-in {
    animation: fade-in 0.5s ease-out forwards;
  }

  .animate-scale-up {
    animation: scale-up 0.6s ease-out forwards;
  }

  .animate-spin {
    animation: spin 1s linear infinite;
  }

  .page-transition {
    animation: page-fade-in 0.3s ease-out;
  }
}

/* ======================================================
   Utility Layer
   Atomic helpers only
   ====================================================== */
@layer utilities {
  .transition-width {
    transition-property: width;
    transition-duration: 300ms;
    transition-timing-function: ease;
  }
}

/* ======================================================
   Accessibility
   ====================================================== */
@media (prefers-reduced-motion: reduce) {

  *,
  *::before,
  *::after {
    transition: none !important;
    animation: none !important;
  }

  .animate-fade-in,
  .animate-scale-up,
  .animate-spin {
    animation: none !important;
  }
}